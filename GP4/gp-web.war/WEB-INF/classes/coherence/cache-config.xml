<?xml version="1.0"?>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!--                                                                       -->
<!--              Coherence Hibernate CacheProvider:                       -->
<!--                  Cache Configuration Descriptor                       -->
<!--                                                                       -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<!DOCTYPE cache-config SYSTEM "cache-config.dtd">

<cache-config>
  <caching-scheme-mapping>

    <cache-mapping>
      <!--
      Query cache configuration.
      -->
      <cache-name>org.hibernate.cache.*</cache-name>
      <!-- <scheme-name>hibernate-replicated</scheme-name> -->
      <scheme-name>distributed-hibernate</scheme-name>
      <init-params>
        <init-param>
          <param-name>size-limit</param-name>
          <param-value>100</param-value>
        </init-param>
      </init-params>
    </cache-mapping>

    <cache-mapping>
      <!--
      Entity cache configuration.
      -->
      <cache-name>*</cache-name>
      <!-- <scheme-name>hibernate-replicated</scheme-name> -->
      <scheme-name>distributed-hibernate</scheme-name>
      <init-params>
        <init-param>
          <param-name>size-limit</param-name>
          <param-value>1000</param-value>
        </init-param>
      </init-params>
    </cache-mapping>
  </caching-scheme-mapping> 

  <caching-schemes>

    <replicated-scheme>
      <!--
      Size-limited replicated caching scheme.
      -->
      <scheme-name>hibernate-replicated</scheme-name>
      <service-name>HibernateReplicatedCache</service-name>

      <backing-map-scheme>
        <local-scheme>
          <high-units>{size-limit 0}</high-units>
        </local-scheme>
      </backing-map-scheme>

      <autostart>true</autostart>
    </replicated-scheme>
    
    <distributed-scheme>
      <scheme-name>distributed-hibernate</scheme-name>
      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <internal-cache-scheme>
            <local-scheme/>
          </internal-cache-scheme>
<!-- 
          <cachestore-scheme>
			<class-scheme>
				<class-name>spring-bean:entityCacheStore</class-name>
				<init-params>
					<init-param>
						<param-name>setEntityName</param-name>
						<param-value>{cache-name}</param-value>
					</init-param>
				</init-params>
			</class-scheme> 
            <class-scheme>
              <class-name>
              com.egatesolutions.gp.core.cache.coherence.DBCacheStore
              </class-name>
              <init-params>
                <init-param>
                  <param-type>java.lang.String</param-type>
                  <param-value>com.company.{cache-name}</param-value>
                </init-param>
              </init-params>
            </class-scheme>
          </cachestore-scheme>
-->
        </read-write-backing-map-scheme>
      </backing-map-scheme>
    </distributed-scheme>
  </caching-schemes>
</cache-config>
